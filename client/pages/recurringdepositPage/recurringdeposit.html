<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recurring Deposit Management</title>
    <link rel="stylesheet" href="recurringdeposit.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <div class="header">
        <h1 class="title">Recurring Deposit ðŸ”„ðŸ’µ</h1>
        <!-- <div class="account-info">
            <div class="account-symbol">ðŸ”„</div>
            <div class="account-details">
                <div class="account-id">Account ID: 700</div>
            </div>
        </div> -->
    </div>

    <div class="controls-section">
        <div class="register-container">
            <button class="register-btn" onclick="toggleRegisterForm()">Register</button>
        </div>

        <div class="calculator-container">
            <button class="calculator-btn" onclick="openCalculator()">Calculate Maturity Amount</button>
        </div>

        <!-- Registration Form -->
        <div id="registerForm" class="register-form hidden">
            <h3 style="text-align: center; margin-bottom: 25px; color: #fff; font-size: 1.5em;">
                Register New Recurring Deposit
            </h3>

            <div class="form-row">
                <div class="form-group"> 
                    <label class="form-label">User ID <span class="required">*</span></label> 
                    <input type="number" class="form-input" id="userId" readonly> 
                </div>
            </div>

            <div class="form-row">
                <div class="form-group"> 
                    <label class="form-label">Account ID <span class="required">*</span></label> 
                    <input type="number" class="form-input" id="accountId" > 
                </div>
            </div>

            <!-- Monthly Installment Amount -->
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Monthly Installment Amount (â‚¹) <span class="required">*</span></label>
                    <input type="number" class="form-input" id="monthlyAmount" 
                        placeholder="Enter monthly amount" min="500" max="50000" step="100" required>
                    <small class="info-text">Amount should be between â‚¹500 and â‚¹50,000</small>
                    <small class="error-text" id="monthlyAmountError"></small>
                </div>
            </div>

            <!-- Interest & Tenure -->
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Interest Rate (%) <span class="required">*</span></label>
                    <input type="number" class="form-input" id="interestRate" 
                        placeholder="Auto-selected based on tenure" step="0.1" readonly required>
                    <small class="info-text">
                        Interest Rate depends on tenure:<br>
                        â€¢ 6 months â†’ 5.5% <br>
                        â€¢ 1 - 1.5 years â†’ 6.8% <br>
                        â€¢ 2 - 4.5 years â†’ 7.2% <br>
                        â€¢ 5 years â†’ 7.5%
                    </small>
                </div>
                <div class="form-group">
                    <label class="form-label">Tenure (Months) <span class="required">*</span></label>
                    <input type="number" class="form-input" id="tenureMonths" 
                        placeholder="Enter tenure in months" min="6" max="60" required 
                        oninput="updateInterestRate()">
                    <small class="error-text" id="tenureError"></small>
                </div>
            </div>

            <!-- Start Date -->
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Start Date <span class="required">*</span></label>
                    <input type="date" class="form-input" id="startDate" required>
                </div>
            </div>

            <div class="form-buttons">
                <button class="form-btn submit-btn" onclick="submitRegistration()">Submit Registration</button>
                <button class="form-btn cancel-form-btn" onclick="cancelRegistration()">Cancel</button>
            </div>
        </div>

        <div class="date-input-section">
            <label for="entryDate" style="color: #fff; font-weight: bold;">Entering Date:</label>
            <input type="date" id="entryDate" class="date-input" onchange="updateCalendarConstraints()">
        </div>

        <div class="show-all-container">
            <button class="show-all-btn" onclick="showAllRecurringDeposits()">Show All Recurring Deposits</button>
        </div>
    </div>

    <div id="rdListContainer" class="rd-list-container hidden">
        <h2 class="rd-list-title">Recurring Deposits List</h2>
        <div id="rdList"></div>
    </div>

    <!-- Maturity Calculator Modal -->
    <div id="calculatorModal" class="calculator-modal">
        <div class="calculator-content">
            <div class="calculator-title">Calculate Maturity Amount</div>
            
            <div class="calc-input-group">
                <label class="calc-label">Monthly Installment Amount (â‚¹)</label>
                <input type="number" class="calc-input" id="calcMonthlyAmount" placeholder="Enter monthly amount">
            </div>
            
            <div class="calc-input-group">
                <label class="calc-label">Interest Rate (%)</label>
                <input type="number" class="calc-input" id="calcInterestRate" placeholder="Enter interest rate" step="0.1">
            </div>
            
            <div class="calc-input-group">
                <label class="calc-label">Tenure (Months)</label>
                <input type="number" class="calc-input" id="calcTenure" placeholder="Enter tenure in months">
            </div>
            
            <div id="calculatorResult" class="calc-result hidden">
                <h4>Maturity Amount:</h4>
                <div class="amount" id="maturityAmountResult">â‚¹0</div>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn ok-btn" onclick="calculateMaturity()">Calculate</button>
                <button class="modal-btn cancel-btn" onclick="closeCalculator()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Pay Modal -->
    <div id="PayModal" class="Pay-modal">
        <div class="Pay-modal-content">
            <h3>Pay Amount</h3>
            <div class="Pay-input-group">
                <label class="Pay-label">RD ID</label>
                <input type="number" class="Pay-input" id="PayRdId" placeholder="Enter RD ID" readonly>
            </div>
            <div class="Pay-input-group">
                <label class="Pay-label">Date</label>
                <input type="date" class="Pay-input" id="PayDate" readonly>
            </div>
            <div class="Pay-input-group">
                <label class="Pay-label">Installment Amount (â‚¹)</label>
                <input type="number" class="Pay-input" id="PayInstallmentAmount" placeholder="Enter installment amount">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn ok-btn" onclick="confirmPayment()">OK</button>
                <button class="modal-btn cancel-btn" onclick="closePayModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Modal for withdrawal confirmation -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal">
            <h3 id="modalMessage">The amount is â‚¹1000. Do you want to withdraw?</h3>
            <div class="modal-buttons">
                <button class="modal-btn ok-btn" onclick="confirmWithdrawal()">OK</button>
                <button class="modal-btn cancel-btn" onclick="cancelWithdrawal()">Cancel</button>
            </div>
        </div>
    </div>

    
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const storedUserId = localStorage.getItem("userId"); 
        if (storedUserId) {
            document.getElementById("userId").value = storedUserId;
        }
    });
    </script>

     <script src="recurringdeposit.js"></script>
</body>
</html>